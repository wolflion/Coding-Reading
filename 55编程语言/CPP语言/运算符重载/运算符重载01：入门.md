## 运算符重载

### 0、课前秀

+ **Function Overloading**：类中函数通过传递参数不同（参数个数，参数类型，参数顺序），编写不同功能的函数。
  + 例：`add(int,int); add(int,float); add(float,float);`
+ **重载**是多态的一种体现。
+ **运算符**不能重载的是：至少可以肯定`sizeof()`应该不可以。

### 1、运算符重载简介

+ **声明格式**：返回数据类型  operator  运算符符号  (数据类型 参数1, ...)
+ 运算符函数既可以声明为一般的函数（非成员函数），也可以声明为类内的成员函数。
+ 当程序使用非成员函数的方式来定义运算符重载时，除了public区块的数据成员外，其它区块的数据成员将无法存取。**此时可以在类中把该运算符函数声明为友元函数**。
+ [ch13_01.cpp]

```cpp
#include <iostream>
#include <cstdlib>
using namespace std;

class Student
{
    friend int operator+(Student&, Student &);//非成员函数，调用private，声明为友元
private:
    int Score;
public:
    Student(int S_Score):Score(S_Score){}  //这是我改的，作者用的是{Score=S_Score;}的方式
};

int operator+(Student& a, Student& b)
{
    return a.Score+b.Score;
}

int main()
{
    Student x(90);
    Student y(75);
    cout<<"x+y="<<x+y<<endl;//x+y返回的是整型，所以无须重载<<
    return 0;
}
```

##### （1）**不可重载定义的运算符**

+ 成员运算符：`.`
+ 范围解析运算符：`::`
+ 条件运算符：`?:`
+ 成员指针运算符：`.*`
+ sizeof运算符：`sizeof`
+ 预处理符号：`#`


### 2、一元运算符的重载

+ 定义成员函数的一元运算符函数：`返回数据类型  operator  运算符()`
+ 定义非成员函数的一元运算符函数：`返回数据类型  operator  运算符(参数)`
+ [ch13_02.cpp]

### 3、二元运算符的重载

+ 定义成员函数的二元运算符函数：`返回数据类型  operator  运算符(数据类型 参数)`
+ 定义非成员函数的二元运算符函数：`返回数据类型  operator  运算符(数据类型 参数1, 数据类型  参数2)`

### 4、特殊运算符重载：">>"和"<<"运算符重载

##### （1）运算符左边必须有`istream &`类型的操作数(`>>`)，`ostream &`类型(`<<`)

+ 原来用的时候，只能输出基本类型`cout << i;`，现在重载后可以输出自定义型的变量`Student a; cout<<a;`
+ `friend ostream& operator<<(ostream & outputval, Student& a);//就是把自定义类型中的 基本类型数据 输出到ostream的对象上。（比如outputval << a.name<<endl;`

### 5、特殊运算符重载：“=”运算符重载

##### （1）注意事项：

+ （1）必须是“非静态”的“成员函数”
+ （2）“=”运算符函数不能被派生类继承
+ （3）即使没有任何类存在，默认的“=”运算符函数依然可以被C++编译程序所接受

### 6、特殊运算符重载：“==”运算符重载

### 7、特殊运算符重载：“++”与“--”运算符重载

##### （1）需要创建 前置  和 后置  两个重载函数

+ 前置原型：`返回类型 operator++();`
+ 后置原型：`返回类型 operator++(int);`

### 8、类型转换运算符重载：类类型转换为基本数据类型

### 9、类型转换运算符重载：基本数据类型转换为类类型

### 10、类型转换运算符重载：类类型转换为其它类类型

### 11、其它细节

##### （1）只能以成员函数的方式来定义的运算符（赋值运算符相关）

+ 赋值运算符：`=`
+ 加法赋值运算符：`+=`
+ 减法赋值运算符：`-=`
+ 乘法赋值运算符：`*=`
+ 除法赋值运算符：`/=`
+ 求余数赋值运算符：`%=`

##### （2）必须被重载为“非成员函数”的有

+ 输入和输出运算符：`">>"和"<<"`

## ReadMe

+ 20200505第一版整理，原型是《从零开始学C++程序设计》chap13运算符载。初看了一下谭浩强的C++也是类似结构。
  + 文中代码用CLion运行通过