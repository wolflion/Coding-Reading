### chap3、目标文件里有什么  78/483

+ 0
  + 编译器编译源代码后生成的文件叫做**目标文件**，是按照可执行文件存储的，但还没有经过链接的过程。

#### 3.1、目标文件的格式

+ `file`命令，查看文件格式。

#### 3.2、目标文件是什么样的

+ 存在各个段
+ 总体来说，程序源代码被编译以后主要分成两种段：程序指令和程序数据。代码段属于程序指令，而数据段和.bss段属于程序数据。

#### 3.3、挖掘SimpleSection.o

+ SimpleSection.c
+ `gcc -c SimpleSection.c`  // -c表示只编译不链接
+ `objdump -h SimpleSection.o`

##### 3.3.1、代码段

+ `objdump -s -d SimpleSection.o`

##### 3.3.2、数据段和只读数据段

+ `objdump -x -s -d SimpleSection.o`

##### 3.3.3、BSS段

+ .bss段存放的是**未初始化的全局变量和局部静态变量**。

##### 3.3.4、其它段

+ **除了.text，.data，.bss这3个常用段**。

#### 3.4、ELF文件结构描述

##### 3.4.1、文件头

+ `readelf -h SimpleSection.o`

##### 3.4.2、段表

+ `readelf -S SimpleSection.o`

##### 3.4.3、重定位表

+ SimpleSection.o中有一个叫做“.rel.text”的段，它的类型（sh_type）为“SHT_REL”，也就是说它是一个**重定位表（Relocation Table）**。

##### 3.4.4、字符串表

#### 3.5、链接的接口--符号

##### 3.5.1、ELF符号表结构

##### 3.5.2、特殊符号

##### 3.5.3、符号修饰与函数签名

##### 3.5.4、extern "C"

##### 3.5.5、弱符号和强符号

#### 3.6、调试信息

#### 3.7、小结